class Solution:
    def longestSquareStreak(self, nums: List[int]) -> int:
        
        lookup = set(nums)
        memo = {}
        def dfs(num):
            if num in memo:
                return memo[num]

            target = num **2

            if target in lookup:
                memo[num] = 1 + dfs(target)
            else:
                memo[num] = 0
            return memo[num]

        max_count = 0 
        for num in nums:
            max_count = max(max_count, dfs(num))
    
        return -1 if max_count == 0 else max_count + 1
